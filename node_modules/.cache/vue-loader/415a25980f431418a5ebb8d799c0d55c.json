{"remainingRequest":"/home/cranberry/Desktop/create/hsms-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cranberry/Desktop/create/hsms-client/src/components/forms/AllocationForm.vue?vue&type=style&index=0&id=074935d4&scoped=true&lang=css&","dependencies":[{"path":"/home/cranberry/Desktop/create/hsms-client/src/components/forms/AllocationForm.vue","mtime":1613115644887},{"path":"/home/cranberry/Desktop/create/hsms-client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cranberry/Desktop/create/hsms-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/cranberry/Desktop/create/hsms-client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/cranberry/Desktop/create/hsms-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cranberry/Desktop/create/hsms-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc2VsZWN0aW9uX2xpc3R7CiAgICBoZWlnaHQ6IDI1MHB4OwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwogICAgYWxpZ24tY29udGVudDogY2VudGVyOwp9Cg=="},{"version":3,"sources":["AllocationForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA","file":"AllocationForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n    <div>\n        <div class=\"card\">\n            <div class=\"card-header\">Allocate patient: <b>{{patient_first_name}} {{patient_last_name}}</b></div>\n            <div class=\"card-body\">\n                <form v-on:submit.prevent v-on:submit=\"allocate()\">\n                    <div class=\"form-group\">\n                        <label for=\"prioties\">Priorities:</label>\n                        <select id=\"priorities\" class=\"form-control\" v-model=\"form.priority\">\n                            <option v-for=\"(priority, id) in priorities\" :key=\"id\" :value=\"id\">{{priority}}</option>\n                        </select>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"example-datepicker\">Appointment Date</label>\n                        <b-form-datepicker id=\"example-datepicker\" v-model=\"form.allocation_date\" class=\"mb-2\"></b-form-datepicker>\n                    </div>\n                    <p/>\n                    <div class=\"selection_list\">\n                        <b>Select user:</b>\n                        <p/>\n                        <table class=\"table table-striped table-sm\">\n                        <thead>\n                            <tr>\n                            <th scope=\"col\">Assign</th>\n                            <th scope=\"col\">Username</th>\n                            <th scope=\"col\">Phonenumber</th>\n                            <th scope=\"col\">Role</th>\n                            <th scope=\"col\">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr v-for=\"(user, id) in users\" :key=\"id\">\n                            <td> <input type=\"radio\" name=\"user\" @click=\"onPersonelChecked(user.id)\"/> </td>   \n                            <td>{{user.username}}</td>\n                            <td>{{user.email}}</td> \n                            <td>{{user.role_name}}</td>\n                            <td>{{user.status}}</td>\n                            </tr>\n                        </tbody>\n                        </table>\n                    </div>\n                    \n                    <button type=\"submit\" class=\"btn btn-primary\">Allocate</button>\n                </form>\n            </div>\n        </div>\n    </div>    \n</template>\n\n<script>\nimport modelFactory from \"@/services/resources/resourceFactory.js\";\n\nexport default {\n    name: \"AllocationForm\",\n    data(){\n        return {\n            form: {\n                assigned_to: 0,\n                priority: \"Normal\",\n                allocation_date: \"\",\n                patient_id: this.patient_id\n            },\n            priorities: {\n                \"Normal\" : \"Normal\",\n                \"Emergency\": \"Emergency\"\n            },\n            patients: [],\n            users: []\n        }\n    },\n    props: ['patient_id', 'patient_first_name', 'patient_last_name'],\n    methods:{\n        getUsers(){\n            const users = modelFactory.get('users');\n            users.index().then(response =>{\n                this.users = response.data.data\n            })\n        },\n        getPatients(){\n            const patients = modelFactory.get('patients');\n            patients.index().then(response => {\n                this.patients = response.data.data\n                console.log(this.patients);\n            }) \n        },\n        onPersonelChecked(id){\n            this.form.assigned_to = id\n        },\n        allocate(){\n            if (!this.form.assigned_to){\n                this.$dialogs.alert(`Please select a medical personel`)\n                    .then(res => console.log(res))\n            }else{\n                const allocation = modelFactory.get('allocations');\n                allocation.add(this.form)\n                        .then(response => {\n                            this.$dialogs.alert(`Patient allocation successful`)\n                                .then(res => console.log(res))\n                            console.log(response);\n                        }).catch(err => {\n                            const status = err.response.status;\n                            const message = err.response.data.data;\n                            this.$dialogs.alert(message,{title:status, size:\"sm\"})\n                                .then(res => console.log(res))\n                        })\n            }\n        }\n    },\n    mounted(){\n        this.getUsers();\n        this.getPatients();\n    }\n}\n</script>\n<style scoped>\n    .selection_list{\n        height: 250px;\n        overflow-y: scroll;\n        align-content: center;\n    }\n</style>"]}]}